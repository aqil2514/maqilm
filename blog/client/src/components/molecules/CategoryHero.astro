---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

const collections = await getCollection("blog");
const posts = collections.slice(0, 5);
---

<div class="hero">
  <swiper-container
    loop="true"
    pagination="true"
    navigation="true"
    autoplay='{"delay": 3000}'
  >
    {
      posts.map((post) => {
        return (
          <swiper-slide style={`background:url(${post.data.heroImage})`}>
            <figure>
              <Image
                src={post.data.heroImage as string}
                inferSize
                alt={post.data.title}
              />
              <div>
                <figcaption>{post.data.title}</figcaption>
                <p class="description">{post.data.description}</p>
                <a href={`/blog/${post.id}`}>Baca Artikel &gt;&gt;</a>
              </div>
            </figure>
          </swiper-slide>
        );
      })
    }
  </swiper-container>

  <script
    src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"
  ></script>
</div>

<style>
  .hero {
    height: 360px;
    width: 960px;
    margin: 1rem auto 2rem;
    background-color: black;
    padding: 1rem;
    border-radius: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; /* Agar gambar tidak keluar dari area */
  }

  swiper-container {
    width: 100%;
    height: 100%;
  }

  swiper-slide {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    padding: 1rem;
    background: linear-gradient(to right, #ff7e5f, #feb47b);
    background-position: center !important;
    background-repeat: no-repeat !important;
    background-size: cover !important;
    border-radius: 0.5rem;
    overflow: hidden;
    position: relative;
  }

  swiper-slide::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.3); /* Overlay agar teks tetap terbaca */
  }

  swiper-slide figure {
    width: 100%;
    height: 100%;
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: center;
    border-radius: 0.5rem;
    overflow: hidden; /* Agar gambar tidak keluar */
    position: relative;
    border-radius: 0.5rem;
  }

  swiper-slide figure img {
    width: 100%;
    height: 100%;
    max-width: 500px;
    max-height: 300px; /* Batasi ukuran gambar */
    object-fit: cover; /* Pastikan gambar mengisi seluruh area */
    border-radius: 0.5rem;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease-in-out;
  }

  swiper-slide figure img:hover {
    transform: scale(1.05); /* Sedikit memperbesar saat hover */
  }

  swiper-slide figure figcaption {
    font-family: cursive, sans-serif;
    font-size: 1.5rem;
  }

  swiper-slide figure p {
    font-size: 1rem;
    margin: 1rem 0;
    text-align: justify;
    padding-right: 2rem;
  }

  swiper-slide figure a {
    color: white;
  }
</style>
